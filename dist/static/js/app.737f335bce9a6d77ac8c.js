webpackJsonp([1],{EpPI:function(e,t){},GYqU:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("7+uW"),i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-link",{attrs:{to:"/"}},[this._v("Home")]),this._v(" "),t("router-link",{attrs:{to:"/industriesupload"}},[this._v("Upload Industries")]),this._v(" "),t("router-link",{attrs:{to:"/industriesview"}},[this._v("View All Industries")]),this._v(" "),t("router-view")],1)},staticRenderFns:[]};var s=n("VU/8")({name:"App"},i,!1,function(e){n("pgnI")},null,null).exports,o=n("/ocq"),r=n("mvHQ"),d=n.n(r),u=n("fZjL"),l=n.n(u),c=n("oYt9"),h=n("mtWM"),m=n.n(h);a.a.use(c.a);var p={name:"Login",data:function(){return{msg:"",newUser:{name:"",description:""},authenticated:!1}},created:function(){localStorage.getItem("token")&&(this.authenticated=!0)},computed:{validation:function(){return{name:!!this.newUser.name.trim(),description:!!this.newUser.description.trim()}},isValid:function(){var e=this.validation;return l()(e).every(function(t){return e[t]})}},methods:{addUser:function(){var e=this;this.isValid&&(m.a.post("https://drfbackend.herokuapp.com/apps/register/",d()(this.newUser),{headers:{"Content-Type":"application/json"}}).then(function(t){localStorage.setItem("token",t.data.token),e.authenticated=!0,a.a.swal("Success!","You have been registered.","success")}).catch(function(e){a.a.swal("Error!","This is our fault, will get fixed soon..","error")}),this.newUser.name="",this.newUser.description="")},logout:function(){localStorage.removeItem("token"),this.authenticated=""}}},v={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"hello"},[n("form",{directives:[{name:"show",rawName:"v-show",value:!e.authenticated,expression:"!authenticated"}],attrs:{id:"form"},on:{submit:function(t){t.preventDefault(),e.addUser(t)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.name,expression:"newUser.name"}],attrs:{type:"text",placeholder:"Username"},domProps:{value:e.newUser.name},on:{input:function(t){t.target.composing||e.$set(e.newUser,"name",t.target.value)}}}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newUser.description,expression:"newUser.description"}],attrs:{type:"text",placeholder:"Description"},domProps:{value:e.newUser.description},on:{input:function(t){t.target.composing||e.$set(e.newUser,"description",t.target.value)}}}),e._v(" "),n("input",{attrs:{type:"submit",value:"Add User"}})]),e._v(" "),n("ul",{directives:[{name:"show",rawName:"v-show",value:!e.authenticated,expression:"!authenticated"}],staticClass:"errors"},[n("li",{directives:[{name:"show",rawName:"v-show",value:!e.validation.name,expression:"!validation.name"}]},[e._v("Name cannot be empty.")]),e._v(" "),n("li",{directives:[{name:"show",rawName:"v-show",value:!e.validation.description,expression:"!validation.description"}]},[e._v("Please provide a valid description.")])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.authenticated,expression:"authenticated"}]},[n("p",[e._v("Authenticated")]),e._v(" "),n("button",{on:{click:e.logout}},[e._v("Logout")])])])},staticRenderFns:[]};var f=n("VU/8")(p,v,!1,function(e){n("hrKD")},"data-v-92833f62",null).exports,w=n("lxTf"),g=n.n(w);a.a.use(c.a);var _=!0,k=[],I={name:"Industriesupload",data:function(){return{CSV:""}},created:function(){localStorage.getItem("token")||(a.a.swal("Please Login to upload!"),N.push({name:"Login"}))},methods:{onFileChange:function(e){var t=e.target.files||e.dataTransfer.files;t.length&&("text/csv"===t[0].type?this.createCSV(t[0]):a.a.swal("Sorry, thats not a valid CSV file"))},createCSV:function(e){var t=this;g.a.parse(e,{download:!0,header:!0,step:function(e,n){n.pause();var i=e.data[0];if("id"in i&&"name"in i){var s=i.id,o=i.name;isNaN(s)||"string"!=typeof o?(a.a.swal("Incorrect Data!","The id column must be number and name column string.","error"),_=!1,n.abort(),t.CSV=""):k.push({id:s,name:o}),n.resume()}else a.a.swal("Incorrect Format!","The header must have id|name.","error"),_=!1,n.abort(),t.CSV=""},complete:function(e,n){_&&(console.log(k),t.CSV=k,t.showDataParseSuccess(k))}})},postData:function(e){m.a.post("https://drfbackend.herokuapp.com/industries/upload",d()(e),{headers:{Authorization:"Token "+localStorage.getItem("token"),"Content-Type":"application/json"}}).then(function(e){a.a.swal("Uploaded!","Your file has been uploaded.","success")}).catch(function(e){a.a.swal("Error!","This is our fault, will get fixed soon..","error")})},removeCSV:function(e){this.CSV="",_=!0},showDataParseSuccess:function(e){var t=this;a.a.swal({title:"The file passed all checks.",text:"Do you want to upload this file?",type:"success",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, upload it!"}).then(function(n){n.value&&t.postData(e)})}}},D={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:""}},[this.CSV?t("div",[t("button",{on:{click:this.removeCSV}},[this._v("Upload another CSV file")])]):t("div",[t("h2",[this._v("Select a CSV file")]),this._v(" "),t("input",{attrs:{type:"file"},on:{change:this.onFileChange}})])])},staticRenderFns:[]},S=n("VU/8")(I,D,!1,null,null,null).exports,U={template:"#item-template",props:{model:Object},data:function(){return{open:!1}},computed:{isFolder:function(){return this.model.children&&this.model.children.length}},methods:{toggle:function(){this.isFolder&&(this.open=!this.open)},openIndustryPage:function(e){N.push({name:"Industry",params:{id:e}})},changeType:function(){this.isFolder||(a.a.set(this.model,"children",[]),this.addChild(),this.open=!0)},addChild:function(){this.model.children.push({name:"new stuff"})}}},b={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"item-template"}},[n("li",[n("div",{class:{bold:e.isFolder}},[n("span",{on:{click:function(t){e.openIndustryPage(e.model.id)}}},[e._v(e._s((e.model.id||"")+" "+e.model.name))]),e._v(" "),e.isFolder?n("span",{on:{click:e.toggle}},[e._v("["+e._s(e.open?"-":"+")+"]")]):e._e()]),e._v(" "),e.isFolder?n("ul",{directives:[{name:"show",rawName:"v-show",value:e.open,expression:"open"}]},e._l(e.model.children,function(e,t){return n("item",{key:t,staticClass:"item",attrs:{model:e}})})):e._e()])])},staticRenderFns:[]};var C=n("VU/8")(U,b,!1,function(e){n("EpPI")},"data-v-b7300db4",null).exports;a.a.use(c.a),a.a.component("Item",C);var x={components:{item:C},data:function(){return{treeData:{name:"industries"},msg:"All Industries Data"}},created:function(){localStorage.getItem("token")?this.fetchData():(a.a.swal("Please Login to view!"),N.push({name:"Login"}))},methods:{fetchData:function(){var e=this;m.a.get("https://drfbackend.herokuapp.com/industries/",{headers:{Authorization:"Token "+localStorage.getItem("token")}}).then(function(t){e.treeData={},e.treeData.name="industries",e.treeData.children=t.data.industries}).catch(function(e){a.a.swal("Error!","This is our fault, will get fixed soon..","error")})},deleteIndustries:function(){var e=this;m.a.delete("https://drfbackend.herokuapp.com/industries/delete",{headers:{Authorization:"Token "+localStorage.getItem("token")}}).then(function(t){a.a.swal("Deleted!","All data has been deleted.","success"),e.treeData={name:"industries"}}).catch(function(e){a.a.swal("Error!","This is our fault, will get fixed soon..","error")})}}},y={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"test"}},[n("h2",[e._v(e._s(e.msg))]),e._v(" "),n("button",{on:{click:e.deleteIndustries}},[e._v("Delete all data")]),e._v(" "),n("ul",{attrs:{id:"demo"}},[n("item",{staticClass:"item",attrs:{model:e.treeData}})],1)])},staticRenderFns:[]};var V=n("VU/8")(x,y,!1,function(e){n("Yb8n")},"data-v-3a4214ae",null).exports;a.a.use(c.a),a.a.component("Item",C);var T={components:{item:C},data:function(){return{treeData:{name:"industries"},msg:""}},watch:{$route:"fetchData"},created:function(){localStorage.getItem("token")?this.fetchData():(a.a.swal("Please Login to view!"),N.push({name:"Login"}))},methods:{fetchData:function(){var e=this;this.$route.params.id?(this.msg="Industries under industry id - "+this.$route.params.id,m.a.get("https://drfbackend.herokuapp.com/industries/"+this.$route.params.id+"/",{headers:{Authorization:"Token "+localStorage.getItem("token")}}).then(function(t){e.treeData={},e.treeData.name="industries",e.treeData.children=t.data.industries}).catch(function(e){a.a.swal("Error!","This is our fault, will get fixed soon..","error")})):N.push({name:"Industriesview"})}}},F={render:function(){var e=this.$createElement,t=this._self._c||e;return t("ul",{attrs:{id:"demo"}},[t("h2",[this._v(this._s(this.msg))]),this._v(" "),t("item",{staticClass:"item",attrs:{model:this.treeData}})],1)},staticRenderFns:[]};var E=n("VU/8")(T,F,!1,function(e){n("mLD1")},"data-v-df3b0424",null).exports;a.a.use(o.a);var N=new o.a({routes:[{path:"/",name:"Login",component:f},{path:"/industriesupload",name:"Industriesupload",component:S},{path:"/industriesview",name:"Industriesview",component:V},{path:"/industry/:id",name:"Industry",component:E}]});a.a.config.productionTip=!1,new a.a({el:"#app",router:N,components:{App:s},template:"<App/>"})},Yb8n:function(e,t){},hrKD:function(e,t){},mLD1:function(e,t){},pgnI:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.737f335bce9a6d77ac8c.js.map